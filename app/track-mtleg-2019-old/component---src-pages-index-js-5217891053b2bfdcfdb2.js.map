{"version":3,"sources":["webpack:///.-gatsby/src/components/LawmakerSummary.jsx","webpack:///.-gatsby/src/pages/index.js","webpack:///.-gatsby/src/components/ButtonBar.jsx"],"names":["columns","key","header","content","d","name","party","style","styles","nameCol","sortFunction","sortByLawmakerName","district","city","districtCol","sortByDistrict","numSponsoredBills","billNumCol","percentFormat","percentVotesWithMajority","votePercentCol","sortByLawmakerValue","percentVotesWithGopCaucus","percentVotesWithDemCaucus","Table","props","_this","_Component","call","this","state","sortColumn","ascending","makeSortHandler","bind","assertThisInitialized_default","column","_this2","setState","render","_this3","a","b","lawmakers","sort","headers","map","schema","sortClass","colSortable","colNotSortable","colActiveSortAsc","colActiveSortDesc","react_default","createElement","className","onClick","rows","action","i","Row","table","rowsContainer","Component","lawmaker","url","getLawmakerUrlName","color","cells","gatsby_browser_entry","to","String","row","chambers","label","chamberLawmakers","getHouseLawmakers","getSenateLawmakers","parties","filter","Home","chamber","showLawmakers","layout","seo","title","byline","href","update","getUpdateDate","ButtonBar","buttons","id","initial","note","LawmakerSummary","active","button","makeButton","react__WEBPACK_IMPORTED_MODULE_1___default","buttonBar","buildClickHandler","join"],"mappings":"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","file":"component---src-pages-index-js-5217891053b2bfdcfdb2.js","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'gatsby'\n\nimport styles from './LawmakerSummary.module.css';\n\nimport { getLawmakerUrlName, percentFormat,\n    sortByDistrict, sortByLawmakerName, sortByLawmakerValue\n } from './../process/handling'\n\nconst columns = [\n    {\n        key: 'name',\n        header: 'Lawmaker',\n        content: d => `${d.name} (${d.party})`,\n        style: styles.nameCol,\n        sortFunction: sortByLawmakerName\n    },\n    {\n        key: 'district',\n        header: 'District',\n        content: d => `${d.district} / ${d.city}`,\n        style: styles.districtCol,\n        sortFunction: sortByDistrict,\n    },\n    {\n        key: 'bills',\n        header: 'Bills sponsored',\n        content: d => d.numSponsoredBills,\n        \n        style: styles.billNumCol,\n        sortFunction: null,\n    },\n    {\n        key: 'majorityVote',\n        header: 'Votes with majority of body',\n        content: d => percentFormat(d.percentVotesWithMajority),\n        style: styles.votePercentCol,\n        sortFunction: sortByLawmakerValue('percentVotesWithMajority'),\n    },\n    {\n        key: 'gopVote',\n        header: 'Votes with GOP caucus',\n        content: d => percentFormat(d.percentVotesWithGopCaucus),\n        style: styles.votePercentCol,\n        sortFunction: sortByLawmakerValue('percentVotesWithGopCaucus'),\n    },\n    {\n        key: 'demVote',\n        header: 'Votes with Dem. caucus',\n        content: d => percentFormat(d.percentVotesWithDemCaucus),\n        style: styles.votePercentCol,\n        sortFunction: sortByLawmakerValue('percentVotesWithDemCaucus'),\n    },\n]\n\nclass Table extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            sortColumn: columns[0],\n            ascending: true,\n        }\n        this.makeSortHandler = this.makeSortHandler.bind(this)\n    }\n\n    makeSortHandler(column){\n        if (column.sortFunction === null) return null // catches null sort function\n        return () => {\n            this.setState({\n                sortColumn: column,\n                ascending: !this.state.ascending\n            })\n        }\n    }\n    \n    render() {\n        const sortFunction = this.state.ascending ?\n            this.state.sortColumn.sortFunction :\n            (a,b) => this.state.sortColumn.sortFunction(b,a) // reverses sort\n        const lawmakers = this.props.lawmakers\n            .sort(sortFunction)\n        \n        const headers = columns.map(schema => {\n\n            let sortClass = styles.colSortable\n            // non-sortable column\n            if (schema.sortFunction === null) sortClass = styles.colNotSortable\n            // active sort column, ascending or descending\n            else if (schema.key === this.state.sortColumn.key && this.state.ascending) sortClass = `${styles.colSortable} ${styles.colActiveSortAsc}`\n            else if (schema.key === this.state.sortColumn.key && !this.state.ascending) sortClass = `${styles.colSortable} ${styles.colActiveSortDesc}`\n            \n            return <div\n                key={schema.header}\n                className={`${schema.style}`}\n                onClick={this.makeSortHandler(schema)}\n                >\n                <span className={sortClass}>{schema.header}</span>\n            </div>\n        })\n        const rows = lawmakers.map((action,i) => Row(action, i))\n        return (<div className={styles.table}>\n            <div className={styles.header}>{headers}</div>\n            <div className={styles.rowsContainer}>{rows}</div>\n        </div>);\n    }\n}\n\nconst Row = (lawmaker, i) => {\n    const url = getLawmakerUrlName(lawmaker)\n    const color = (lawmaker.party === 'R') ? '#b2182b' : '#2166ac'\n\n    const cells = columns.map(schema => {\n        return <div\n            key={schema.header}\n            className={schema.style}\n            >\n            {schema.content(lawmaker)}\n        </div>\n    })\n\n    return (<Link\n        to={`/lawmaker/${url}`}\n        key={String(i)}\n        className={styles.row}\n        style={{color: color}}>\n        {cells}\n    </Link>\n    )\n}\n\nexport default Table","import React, { Component } from 'react'\nimport Layout from \"../components/layout\"\nimport SEO from '../components/seo'\n\n// import { plotAllVotesForBill } from '../utils.js'\n\n\n// import EmailForm from './../components/EmailForm'\nimport ButtonBar from './../components/ButtonBar'\nimport LawmakerSummary from './../components/LawmakerSummary'\n\n\nimport styles from './index.module.css'\n\nimport {getHouseLawmakers, getSenateLawmakers, getUpdateDate,\n} from '../process/handling'\n\nconst chambers = [\n    {\n        label: 'Montana House',\n        chamberLawmakers: getHouseLawmakers\n    },\n    {\n        label: 'Montana Senate',\n        chamberLawmakers: getSenateLawmakers\n    },\n]\n\nconst parties = [\n    {\n        label: '',\n        filter: lawmaker => true\n    },\n    {\n        label: 'Republicans',\n        filter: d => d.party === 'R'\n    },\n    {\n        label: 'Democrats',\n        filter: d => d.party === 'D'\n    },\n\n]\n\nclass Home extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            chamber: chambers[0],\n            party: parties[0],\n        }\n    }\n    render(){\n        const showLawmakers = this.state.chamber.chamberLawmakers()\n            .filter(this.state.party.filter)\n        \n        return(\n        <Layout>\n            <SEO\n                title=\"News App: Tracking the 2019 Legislature\"\n            />\n            \n            <h1>NEWS APP: Tracking the 2019 Montana Legislature</h1>\n            <div className=\"article\" >\n                <div className={styles.byline}>\n                    By <a href=\"http://www.montanafreepress.org/author/edietrich/\">Eric Dietrich</a>, Montana Free Press\n                </div>\n                <div className={styles.update}>Last updated {getUpdateDate()}</div>\n\n                {/* <p>As Montanans, we have a constitutionally guaranteed <a href=\"https://leg.mt.gov/bills/mca/CONSTITUTION/II/9.htm\"> right to know what our government is up to</a>. But with <span className={styles.number}>{getAllBills().length} bills</span> introduced in the Montana Legislature’s 2019 session and <span className={styles.number}>{getFloorVotes().length} votes</span> recorded as lawmakers debate them, there’s enough going on in the Capitol that it’s tricky for anyone who can't follow things full-time to keep up.</p> */}\n\n                <p>This Montana Free Press news app aims to help our readers stay on top of the legislative action, tabulating data from the state <a href='http://laws.leg.mt.gov/legprd/law0203w$.startup?P_SESS=20191'>LAWS system</a> collected using code adapted from the <a href=\"https://openstates.org/\">OpenStates</a> project.</p>\n\n                {/* <p>We plan to add more features to the app going forward (especially if readers like you tell us this is useful) but for the time being here’s what this project lets you do:</p>\n\n                <ul className={styles.linksContainer}>\n                    <li>See what bills specific lawmakers have sponsored and how they’ve voted in their respective chambers (e.g., <Link to={`/lawmaker/greg-hertz/`}>Speaker of the House Greg Hertz</Link>)</li> \n                    <li>Look up your representatives <Link to={`/lawmakers`}>by your home or business address</Link></li>\n                    <li>See the key actions and votes taken on individual bills (e.g., <Link to={`/bill/HB1`}>House Bill 1</Link>)</li>\n                    <li>See <Link to={`/bills`}>the status of introduced bills</Link></li>\n                </ul> */}\n\n                <p>Note that this is currently a beta product. Have feedback? We'd love to hear it &mdash; drop a line to Data Reporter Eric Dietrich at <a href=\"mailto:edietrich@mtfp.org\">edietrich@mtfp.org</a>.</p>\n                {/* <EmailForm /> */}\n            </div>\n            \n            <h2>Legislative summary</h2>\n            <div>\n                <ButtonBar\n                    buttons={[\n                        {\n                            id: 'house',\n                            label: 'Show House',\n                            action: (id) => {this.setState({chamber: chambers[0]})}\n                        },\n                        {\n                            id: 'senate',\n                            label: 'Show Senate',\n                            action: (id) => {this.setState({chamber: chambers[1]})},\n                        }\n                    ]}\n                    initial='house'\n                />\n                <ButtonBar\n                    buttons={[\n                        {\n                            id: 'all',\n                            label: 'Show All Lawmakers',\n                            action: (id) => {this.setState({party: parties[0]})}\n                        },\n                        {\n                            id: 'gop',\n                            label: 'Show Republicans',\n                            action: (id) => {this.setState({party: parties[1]})}\n                        },\n                        {\n                            id: 'dem',\n                            label: 'Show Democrats',\n                            action: (id) => {this.setState({party: parties[2]})}\n                        },\n                    ]}\n                    initial='all'\n                />\n                <div className={styles.note}>The majority vote percentage figure indicates how often the lawmaker has voted with at least half their fellow lawmakers in both parties. Party vote statistics indicate how often the lawmaker has voted with a majority of members in that party's caucus. Statistics represent second reading votes only and exclude votes where individual lawmakers were marked absent.</div>\n                <h3>{this.state.chamber.label} {this.state.party.label}</h3>\n                <LawmakerSummary lawmakers={showLawmakers} />\n            </div>\n            \n        </Layout>\n        )\n    }\n}\n\nexport default Home","import React, { Component } from 'react'\n\nimport styles from './ButtonBar.module.css'\n\nclass ButtonBar extends Component {\n    constructor(props){\n        super(props)\n\n        this.state = {\n            active: this.props.initial,\n        }\n    }\n    \n    render(){\n        const buttons = this.props.buttons.map(button => this.makeButton(button))\n        return <div className={styles.buttonBar}>\n            {buttons}\n        </div>\n    }\n\n    buildClickHandler(button){\n        return () => {\n            this.setState({active: button.id})\n            button.action(button.id)\n        }\n    }\n\n    makeButton(button){\n        const className = (button.id === this.state.active) ? [styles.button, styles.active].join(' ') : styles.button\n        return <button key={button.id}\n            className={className}\n            onClick={this.buildClickHandler(button)}>\n            {button.label}\n        </button>\n    }\n\n}\n\nexport default ButtonBar"],"sourceRoot":""}